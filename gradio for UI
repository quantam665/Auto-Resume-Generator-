# Install dependencies
!pip install -q gradio requests

import gradio as gr
import requests

API_BASE = "https://f6d5-34-73-7-255.ngrok-free.app"

def generate_resume(name="", email="", linkedin="", summary="", education="", experience="", projects="", skills=""):
    # Build valid JSON body
    data = {
        "name": name.strip(),
        "email": email.strip(),
        "linkedin": linkedin.strip(),
        "summary": summary.strip(),
        "education": education.strip(),
        "experience": experience.strip(),
        "projects": projects.strip(),
        "skills": skills.strip()
    }

    # Check for missing required fields
    if not data["name"]:
        return "âŒ Error: 'Name' is required."

    try:
        response = requests.post(f"{API_BASE}/generate_resume/", json=data)
        if response.status_code == 200:
            return "âœ… Resume generated successfully!"
        else:
            return f"âŒ Error {response.status_code}: {response.text}"
    except Exception as e:
        return f"âŒ Exception: {str(e)}"

# Gradio UI
with gr.Blocks(title="Gemini Resume Builder") as demo:
    gr.Markdown("## ğŸ§  Gemini Resume Builder (API Connected UI)")

    with gr.Row():
        name = gr.Textbox(label="ğŸ‘¤ Name", placeholder="John Doe")
        email = gr.Textbox(label="ğŸ“§ Email", placeholder="john@example.com")
        linkedin = gr.Textbox(label="ğŸ”— LinkedIn", placeholder="https://linkedin.com/in/yourprofile")

    summary = gr.Textbox(label="ğŸ“ Summary", lines=3)
    education = gr.Textbox(label="ğŸ“ Education", lines=3)
    experience = gr.Textbox(label="ğŸ’¼ Experience", lines=3)
    projects = gr.Textbox(label="ğŸš€ Projects", lines=3)
    skills = gr.Textbox(label="ğŸ› ï¸ Skills", placeholder="Python, ML, NLP...")

    submit = gr.Button("ğŸ“„ Generate Resume")
    output = gr.Textbox(label="ğŸ“¢ Output")

    submit.click(
        fn=generate_resume,
        inputs=[name, email, linkedin, summary, education, experience, projects, skills],
        outputs=output
    )

demo.launch(share=True)
# Install dependencies
!pip install -q gradio requests

import gradio as gr
import requests

API_BASE = "https://f6d5-34-73-7-255.ngrok-free.app"

def generate_resume(name="", email="", linkedin="", summary="", education="", experience="", projects="", skills=""):
    # Build valid JSON body
    data = {
        "name": name.strip(),
        "email": email.strip(),
        "linkedin": linkedin.strip(),
        "summary": summary.strip(),
        "education": education.strip(),
        "experience": experience.strip(),
        "projects": projects.strip(),
        "skills": skills.strip()
    }

    # Check for missing required fields
    if not data["name"]:
        return "âŒ Error: 'Name' is required."

    try:
        response = requests.post(f"{API_BASE}/generate_resume/", json=data)
        if response.status_code == 200:
            return "âœ… Resume generated successfully!"
        else:
            return f"âŒ Error {response.status_code}: {response.text}"
    except Exception as e:
        return f"âŒ Exception: {str(e)}"

# Gradio UI
with gr.Blocks(title="Gemini Resume Builder") as demo:
    gr.Markdown("## ğŸ§  Gemini Resume Builder (API Connected UI)")

    with gr.Row():
        name = gr.Textbox(label="ğŸ‘¤ Name", placeholder="John Doe")
        email = gr.Textbox(label="ğŸ“§ Email", placeholder="john@example.com")
        linkedin = gr.Textbox(label="ğŸ”— LinkedIn", placeholder="https://linkedin.com/in/yourprofile")

    summary = gr.Textbox(label="ğŸ“ Summary", lines=3)
    education = gr.Textbox(label="ğŸ“ Education", lines=3)
    experience = gr.Textbox(label="ğŸ’¼ Experience", lines=3)
    projects = gr.Textbox(label="ğŸš€ Projects", lines=3)
    skills = gr.Textbox(label="ğŸ› ï¸ Skills", placeholder="Python, ML, NLP...")

    submit = gr.Button("ğŸ“„ Generate Resume")
    output = gr.Textbox(label="ğŸ“¢ Output")

    submit.click(
        fn=generate_resume,
        inputs=[name, email, linkedin, summary, education, experience, projects, skills],
        outputs=output
    )

demo.launch(share=True)
